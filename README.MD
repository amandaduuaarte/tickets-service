# Ticket - Service üíª

## Explicando o projeto: üéØ
MicroServi√ßo de valida√ß√£o de compras de ingressos para eventos, o projeto consiste em um sistema simples de verifica√ß√£o basicamente funciona como um MS que deve ser integrado a outros servi√ßos j√° que sua resposabilidade por ora √© validar se todos os dados do comprador e do evento est√£o de acordo com o esperado e com isso realizar o envio de um email para o endere√ßo fornecido pelo poss√≠vel comprador, al√©m de tamb√©m criar eventos passando por uma valida√ß√£o de dados. 

### Funcionalidades j√° implementadas: ü§ì
* Token v√°lido: Hoje a aplica√ß√£o conta com uma valida√ß√£o de token, ou seja, a rota para confirmar compra precisa de um token v√°lido.
* Envio de email: O projeto utiliza de um servi√ßo para que possa ser feito o disparo de email para o endere√ßo informado no payload recebido.
* Cadastro de eventos: Hoje a aplica√ß√£o conta com uma rota post que serve para cria√ß√£o dos eventos.


### Techs usadas: ‚úÖ 
* Node JS.
* TypeScript.
* Express -> usado como web application framework para a cria√ß√£o do projeto.
* RabbitMQ -> Para a realiza√ß√£o de comunica√ß√£o ass√≠ncrona, simulando o consumo de outro MS das mensagens em fila para que houvesse o disparo de email.
* Nodemailer -> Usado para auxilixar no envio de email.
* Yup -> Valida√ß√£o dos par√¢metros recebidos em rota, usado como uma camada a mais.
* Docker -> Para a cria√ß√£o do banco usado na aplica√ß√£o e tamb√©m de toda a infra do rabbitmq.

### Estrutura do projeto e decisoes tomadas: 
- [Como o projeto est√° estruturado?](./STRUCTURE.MD) eu explico um pouco da estrutura do projeto com o objetivo de tornar clara e simples a forma que a aplica√ß√£o est√° estruturada, falando um pouco sobre decisoes
que tomei para chegar nesse padr√£o usado.  
### Rotas da aplica√ß√£o: üó∫Ô∏è
Post -> `api/event-purchase` 
    </br>
payload: 
       ```json
       {
		"eventId": "01",
        "ownerName": "Name",
        "contact": {
        "email": "email@email.com",
        "phoneNumber": "123456789"
        },
        "eventDetails": {
        "area": "vip",
        "quantity": 10  
        }
    }```

Post -> `api/create-event` 
    </br>
payload: 
       ```json
    {
        "name": "MusicEvent",
        "description": "Evento de m√∫sica.",
        "type": "musica",
        "place": "Fortaleza, CE",
        "owner": "Amanda",
        "date": "2023-11-30 20:00:00",
        "front": 340,
        "pista": 450,
        "vip": 500,
        "event_config": {"areas": [{"name": "front", "quantity": 500}, {"name": "vip", "quantity": 200}, 	{"name": "pista", "quantity": 1300}]}
    }```
    
Post -> `/api/auth`
</br>
payload: client-token


### O que pude aprender com esse projeto: üìö
* Aprendi durante o desenvolvimento desse projeto sobre formas melhores de estruturar uma aplica√ß√£o node js, tentei aplicar uma arquitetura limpa usando conhecimentos que estou estudando e implementando da forma que julguei necess√°rio e que consegui entender a real motiva√ß√£o. 
* Um pouco sobre o partner factory, conseguindo desacoplar algumas implementa√ß√µes que julguei necess√°rio tornando partes do c√≥digo um pouco mais independentes entre si. Optei por desenvolver a principal funcionalidade do projeto antes da implementa√ß√£o desse padr√£o para que eu pudesse ver os problemas que surgiram e entender a raz√£o do factory.
* Configura√ß√£o e implementa√ß√£o da comunica√ß√£o por messageria com rabbitmq. 

### Como rodar o projeto? ‚öôÔ∏è
1 -Rode `Yarn ou npm i` dentro do terminal do projeto.
 </br>
 2 - Rode `docker-compose up` para que os containers sejam criados.
 </br>
 3 - `yarn debug:watch`


### Padroes de projeto implementados: 
* Factory
* Adpater

## Quero implementar 
* O singleton => √© usado para criar uma unica instancia de uma determinada classe e 
fornecer um ponto global de acesso a ela. (Usado em recursos compartilhados: acesso a dbs)
    * Gostaria de implementar ele no rabbit e no db (para que eu s√≥ tenha uma instacia dessas classes)